{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Deepak\\\\react_course\\\\covid\\\\client\\\\src\\\\components\\\\sign-in\\\\sign-in.component.jsx\";\nimport React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\"; //import { connect } from \"react-redux\";\n\nimport FormInput from \"../form-input/form-input.component\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport { signin, authenticate, isAuthenticated } from \"../../apis\"; //import { emailSignInStart } from \"../../redux/user/user.actions\";\n\nimport { SignInContainer, ButtonsBarContainer } from \"./sign-in.styles\";\n\nconst SignIn = () => {\n  // const [userCredentials, setCredentials] = useState({\n  //   email: \"\",\n  //   password: \"\",\n  // });\n  // const { email, password } = userCredentials;\n  // const handleSubmit = async (event) => {\n  //   event.preventDefault();\n  //   emailSignInStart(email, password);\n  // };\n  // const handleChange = (event) => {\n  //   const { value, name } = event.target;\n  //   setCredentials({ ...userCredentials, [name]: value });\n  // };\n  const [values, setValues] = useState({\n    email: \"a@deepak.com\",\n    password: \"saregama123\",\n    error: \"\",\n    loading: false,\n    didRedirect: false\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    didRedirect\n  } = values;\n  const {\n    user\n  } = isAuthenticated();\n\n  const handleChange = name => event => {\n    setValues({ ...values,\n      error: false,\n      [name]: event.target.value\n    });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: false,\n      loading: true\n    });\n    signin({\n      email,\n      password\n    }).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error,\n          loading: false\n        });\n      } else {\n        authenticate(data, () => {\n          setValues({ ...values,\n            email: \"\",\n            password: \"\",\n            error: \"\",\n            didRedirect: true\n          });\n        });\n\n        /*#__PURE__*/\n        React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 11\n          }\n        });\n      }\n    }).catch(console.log(\"signin request failed\"));\n  };\n\n  const performRedirect = () => {\n    console.log(\"redir\");\n\n    if (isAuthenticated()) {\n      console.log(\"isauth\");\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(SignInContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, \"Sign in with your email and password\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormInput, {\n    name: \"email\",\n    type: \"email\",\n    handleChange: handleChange,\n    value: email,\n    label: \"email\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FormInput, {\n    name: \"password\",\n    type: \"password\",\n    value: password,\n    handleChange: handleChange,\n    label: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ButtonsBarContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CustomButton, {\n    onClick: onSubmit,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"Sign in\"))));\n}; // const mapDispatchToProps = (dispatch) => ({\n//   emailSignInStart: (email, password) =>\n//     dispatch(emailSignInStart({ email, password })),\n// });\n// export default connect(null, mapDispatchToProps)(SignIn);\n\n\nexport default SignIn;","map":{"version":3,"sources":["C:/Users/Deepak/react_course/covid/client/src/components/sign-in/sign-in.component.jsx"],"names":["React","useState","Redirect","FormInput","CustomButton","signin","authenticate","isAuthenticated","SignInContainer","ButtonsBarContainer","SignIn","values","setValues","email","password","error","loading","didRedirect","user","handleChange","name","event","target","value","onSubmit","preventDefault","then","data","catch","console","log","performRedirect"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n//import { connect } from \"react-redux\";\r\n\r\nimport FormInput from \"../form-input/form-input.component\";\r\nimport CustomButton from \"../custom-button/custom-button.component\";\r\nimport { signin, authenticate, isAuthenticated } from \"../../apis\";\r\n\r\n//import { emailSignInStart } from \"../../redux/user/user.actions\";\r\n\r\nimport { SignInContainer, ButtonsBarContainer } from \"./sign-in.styles\";\r\n\r\nconst SignIn = () => {\r\n  // const [userCredentials, setCredentials] = useState({\r\n  //   email: \"\",\r\n  //   password: \"\",\r\n  // });\r\n\r\n  // const { email, password } = userCredentials;\r\n\r\n  // const handleSubmit = async (event) => {\r\n  //   event.preventDefault();\r\n\r\n  //   emailSignInStart(email, password);\r\n  // };\r\n\r\n  // const handleChange = (event) => {\r\n  //   const { value, name } = event.target;\r\n\r\n  //   setCredentials({ ...userCredentials, [name]: value });\r\n  // };\r\n  const [values, setValues] = useState({\r\n    email: \"a@deepak.com\",\r\n    password: \"saregama123\",\r\n    error: \"\",\r\n    loading: false,\r\n    didRedirect: false,\r\n  });\r\n\r\n  const { email, password, error, loading, didRedirect } = values;\r\n  const { user } = isAuthenticated();\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n    signin({ email, password })\r\n      .then((data) => {\r\n        if (data.error) {\r\n          setValues({ ...values, error: data.error, loading: false });\r\n        } else {\r\n          authenticate(data, () => {\r\n            setValues({\r\n              ...values,\r\n              email: \"\",\r\n              password: \"\",\r\n              error: \"\",\r\n              didRedirect: true,\r\n            });\r\n          });\r\n          <Redirect to=\"/\" />;\r\n        }\r\n      })\r\n      .catch(console.log(\"signin request failed\"));\r\n  };\r\n\r\n  const performRedirect = () => {\r\n    console.log(\"redir\");\r\n    if (isAuthenticated()) {\r\n      console.log(\"isauth\");\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <SignInContainer>\r\n      <span>Sign in with your email and password</span>\r\n\r\n      <form>\r\n        <FormInput\r\n          name=\"email\"\r\n          type=\"email\"\r\n          handleChange={handleChange}\r\n          value={email}\r\n          label=\"email\"\r\n          required\r\n        />\r\n        <FormInput\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={password}\r\n          handleChange={handleChange}\r\n          label=\"password\"\r\n          required\r\n        />\r\n        <ButtonsBarContainer>\r\n          <CustomButton onClick={onSubmit} type=\"submit\">\r\n            Sign in\r\n          </CustomButton>\r\n        </ButtonsBarContainer>\r\n      </form>\r\n    </SignInContainer>\r\n  );\r\n};\r\n\r\n// const mapDispatchToProps = (dispatch) => ({\r\n//   emailSignInStart: (email, password) =>\r\n//     dispatch(emailSignInStart({ email, password })),\r\n// });\r\n\r\n// export default connect(null, mapDispatchToProps)(SignIn);\r\nexport default SignIn;\r\n"]},"metadata":{},"sourceType":"module"}